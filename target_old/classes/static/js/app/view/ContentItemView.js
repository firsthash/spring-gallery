define(["backbone","app/App"],function(b,a){return b.View.extend({template:_.template($("#content-item-template").html()),textTemplate:_.template($("#content-item-template-text").html()),youtubeTemplate:_.template($("#youtube-template").html()),vimeoTemplate:_.template($("#vimeo-template").html()),imageTemplate:_.template($("#image-template").html()),events:{"click .media a":function(){a.contentControls.next();return false},},initialize:function(){a=require("app/App");this.model.on("change:title change:description",function(){this.renderText()},this);this.model.on("change:url",function(){this.renderMedia()},this);this.render()},select:function(){var c=this.model.get("url")||"";var d=c.startsWith("http");if(d&&c.indexOf("youtube")>-1){var e=c.replace(/.*v=([^&]*).*/gi,"$1");return this.youtubeTemplate({videoId:e})}if(d&&c.indexOf("vimeo")>-1){var e=c.replace(/.*\/([^&]*).*/gi,"$1");return this.vimeoTemplate({videoId:e})}return this.imageTemplate(this.model.toJSON())},renderMedia:function(){var c=this.select();this.$(".media").html(c)},renderText:function(){var c=this.textTemplate(this.model.toJSON());this.$(".text").html(c)},render:function(){var c=this.template(this.model.toJSON());this.$el.html(c);$("#content").html(this.el);this.renderMedia();this.renderText();return this}})});